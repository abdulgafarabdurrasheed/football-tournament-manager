import{c as I,f as j,j as e,I as h,L as A,M as F,T as y,S as E,g as k,h as C,b as R,r as f,i as G,k as D,A as U,F as _,l as M,m as O,B as N,n as B,o as W,e as Y}from"./index-Dq6gfH16.js";import{L as m,T as z,G as H,C as b,c as K}from"./label-uLZ-BMxU.js";import{U as V,b as $}from"./useTournament-CKlyewHD.js";import{G as q}from"./globe-BoiHgVEn.js";const Q=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],J=I("layers",Q),X=[{value:"PUBLIC",label:"Public",icon:q,description:"Anyone can find and join"},{value:"PRIVATE",label:"Private",icon:A,description:"Only invited players can join"},{value:"INVITE_ONLY",label:"Invite Only",icon:F,description:"Players need an invite link"}];function Z(){const{register:n,watch:s,setValue:o,formState:{errors:r}}=j(),l=s("visibility");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",children:"Tournament Name *"}),e.jsx(h,{...n("name"),id:"name",placeholder:"Premier League 2026",className:r.name?"border-red-500":""}),r.name&&e.jsx("p",{className:"text-red-400 text-sm",children:r.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",children:"Description (optional)"}),e.jsx("textarea",{...n("description"),id:"description",placeholder:"A friendly tournament among friends...",rows:3,className:`w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg 
                                text-white placeholder:text-slate-500 focus:outline-none 
                                focus:ring-2 focus:ring-yellow-500 focus:border-transparent`}),r.description&&e.jsx("p",{className:"text-red-400 text-sm",children:r.description.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{children:"Visibility *"}),e.jsx("div",{className:"grid gap-3",children:X.map(c=>{const t=c.icon,a=l===c.value;return e.jsxs("button",{type:"button",onClick:()=>o("visibility",c.value),className:`
                                flex items-center gap-4 p-4 rounded-lg border-2 text-left
                                transition-colors duration-200
                                ${a?"border-yellow-500 bg-yellow-500/10":"border-slate-600 hover:border-slate-500"}
                                `,children:[e.jsx(t,{className:`w-5 h-5 ${a?"text-yellow-500":"text-slate-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${a?"text-white":"text-slate-300"}`,children:c.label}),e.jsx("p",{className:"text-sm text-slate-400",children:c.description})]})]},c.value)})})]})]})}const ee=[{value:"LEAGUE",label:"League",icon:z,description:"Round-robin, everyone plays everyone. Best for 4-12 teams.",example:"Like Premier League"},{value:"KNOCKOUT",label:"Knockout",icon:H,description:"Single elimination bracket. Quick and exciting.",example:"Like FA Cup"},{value:"HYBRID_MULTI_GROUP",label:"Groups + Knockout",icon:J,description:"Group stage, then knockout. Best for 8-32 teams.",example:"Like Champions League"},{value:"HYBRID_SINGLE_LEAGUE",label:"League + Knockout",icon:y,description:"One big league, top teams go to playoffs.",example:"Like Conference League"}];function se(){const{register:n,watch:s,setValue:o,formState:{errors:r}}=j(),l=s("format"),c=a=>{switch(a){case"LEAGUE":return{min:4,max:20,recommended:8};case"KNOCKOUT":return{min:4,max:64,recommended:8};case"HYBRID_MULTI_GROUP":return{min:8,max:32,recommended:16};case"HYBRID_SINGLE_LEAGUE":return{min:8,max:24,recommended:16};default:return{min:4,max:64,recommended:8}}},t=c(l);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{children:"Tournament Format *"}),e.jsx("div",{className:"grid gap-3",children:ee.map(a=>{const x=a.icon,p=l===a.value;return e.jsxs("button",{type:"button",onClick:()=>{o("format",a.value);const g=c(a.value);o("maxParticipants",g.recommended)},className:`flex items-start gap-4 p-4 rounded-lg border-2 text-left transition-colors duration-200 ${p?"border-yellow-500 bg-yellow-500/10":"border-slate-600 hover:border-slate-500"}`,children:[e.jsx(x,{className:`w-6 h-6 mt-0.5 ${p?"text-yellow-500":"text-slate-400"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium ${p?"text-white":"text-slate-300"}`,children:a.label}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:a.description}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a.example})]})]},a.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"maxParticipants",children:"Maximum Participants *"}),e.jsx(h,{...n("maxParticipants",{valueAsNumber:!0}),id:"maxParticipants",type:"number",min:t.min,max:t.max,className:r.maxParticipants?"border-red-500":""}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Recommended for ",l.replace("_"," ").toLowerCase(),": ",t.min,"-",t.max," teams"]}),r.maxParticipants&&e.jsx("p",{className:"text-red-400 text-sm",children:r.maxParticipants.message})]})]})}function te(){const{register:n,watch:s,setValue:o,formState:{errors:r}}=j(),l=s("format"),c=s("legsPerMatch"),t=s("hasThirdPlace"),a=l==="HYBRID_MULTI_GROUP"||l==="HYBRID_SINGLE_LEAGUE",x=l==="KNOCKOUT"||l.startsWith("HYBRID");return e.jsxs("div",{className:"space-y-6",children:[(l==="LEAGUE"||a)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Points System"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"pointsForWin",children:"Points for Win"}),e.jsx(h,{...n("pointsForWin",{valueAsNumber:!0}),id:"pointsForWin",type:"number",min:0,max:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"pointsForDraw",children:"Points For Draw"}),e.jsx(h,{...n("pointsForDraw",{valueAsNumber:!0}),id:"pointsForDraw",type:"number",min:0,max:10})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Match Format"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Legs per Match"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>o("legsPerMatch",1),className:`
                                flex-1 py-3 rounded-lg border-2 font-medium transition-colors
                                ${c===1?"border-yellow-500 bg-yellow-500/10 text-white":"border-slate-600 text-slate-400 hover:border-slate-500"}
                            `,children:[" ","Single Leg"," "]}),e.jsx("button",{type:"button",onClick:()=>o("legsPerMatch",2),className:`
                                flex-1 py-3 rounded-lg border-2 font-medium transition-colors
                                ${c===2?"border-yellow-500 bg-yellow-500/10 text-white":"border-slate-600 text-slate-400 hover:border-slate-500"}
                            `,children:"Home & Away"})]}),e.jsx("p",{className:"text-sm text-slate-400",children:c===1?"Each matchup is played once":"Each matchup is played twice (home and away)"})]})]}),l==="HYBRID_MULTI_GROUP"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Group Stage"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"groupSize",children:"Teams per Group"}),e.jsx(h,{...n("groupSize",{valueAsNumber:!0}),id:"groupSize",type:"number",min:3,max:8})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"teamsAdvancing",children:"Teams Advancing"}),e.jsx(h,{...n("teamsAdvancing",{valueAsNumber:!0}),id:"teamsAdvancing",type:"number",min:1,max:4})]})]})]}),l==="HYBRID_SINGLE_LEAGUE"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Playoff Qualification"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"teamsAdvancing",children:"Teams Advancing to Playoffs"}),e.jsx(h,{...n("teamsAdvancing",{valueAsNumber:!0}),id:"teamsAdvancing",type:"number",min:2,max:16}),e.jsx("p",{className:"text-sm text-slate-400",children:"Top teams from the league phase advance to knockout playoffs"})]})]}),x&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Knockout Stage"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o("hasThirdPlace",!t),className:`
                            w-12 h-6 rounded-full transition-colors relative
                            ${t?"bg-yellow-500":"bg-slate-600"}
                        `,children:e.jsx("span",{className:`
                                absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${t?"left-7":"left-1"}
                            `})}),e.jsx(m,{className:"cursor-pointer",onClick:()=>o("hasThirdPlace",!t),children:"Include 3rd Place Match"})]})]})]})}function ae(){const{getValues:n}=j(),s=n(),o={LEAGUE:"League (Round Robin)",KNOCKOUT:"Knockout (Single Elimination)",HYBRID_MULTI_GROUP:"Groups + Knockout",HYBRID_SINGLE_LEAGUE:"League + Playoffs"},r={PUBLIC:"Public",PRIVATE:"Private",INVITE_ONLY:"Invite Only"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center",children:e.jsx(y,{className:"w-5 h-5 text-yellow-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium",children:"Tournament Details"}),e.jsxs("dl",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Name"}),e.jsx("dd",{className:"text-white",children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Visibility"}),e.jsx("dd",{className:"text-white",children:r[s.visibility]})]}),s.description&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Description"}),e.jsx("dd",{className:"text-white truncate max-w-[200px]",children:s.description})]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium",children:"Format"}),e.jsxs("dl",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Type"}),e.jsx("dd",{className:"text-white",children:o[s.format]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Max Participants"}),e.jsxs("dd",{className:"text-white",children:[s.maxParticipants," teams"]})]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium",children:"Settings"}),e.jsxs("dl",{className:"mt-2 space-y-1 text-sm",children:[(s.format==="LEAGUE"||s.format.startsWith("HYBRID"))&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Points for Win"}),e.jsx("dd",{className:"text-white",children:s.pointsForWin})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Points for Draw"}),e.jsx("dd",{className:"text-white",children:s.pointsForDraw})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Match Format"}),e.jsx("dd",{className:"text-white",children:s.legsPerMatch===1?"Single Leg":"Home & Away"})]}),s.format==="HYBRID_MULTI_GROUP"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Group Size"}),e.jsxs("dd",{className:"text-white",children:[s.groupSize," teams"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"Advancing"}),e.jsxs("dd",{className:"text-white",children:["Top ",s.teamsAdvancing]})]})]}),(s.format==="KNOCKOUT"||s.format.startsWith("HYBRID"))&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-slate-400",children:"3rd Place Match"}),e.jsx("dd",{className:"text-white",children:s.hasThirdPlace?"Yes":"No"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-500/10 border border-green-500/30 rounded-lg",children:[e.jsx(b,{className:"w-5 h-5 text-green-500"}),e.jsx("p",{className:"text-green-400 text-sm",children:'Everything looks good! Click "Create Tournament" to proceed.'})]})]})}const u=[{id:"basic",title:"Basic Information",component:Z},{id:"format",title:"Format",component:se},{id:"settings",title:"Settings",component:te},{id:"review",title:"Review",component:ae}];function de(){const n=k(),s=C(),{updateWizardData:o,updateWizardStep:r,clearWizardDraft:l}=R(),c=$(),[t,a]=f.useState(s?.currentStep??0),x=G({resolver:D(K),defaultValues:{name:"",description:"",visibility:"PRIVATE",format:"LEAGUE",maxParticipants:8,pointsForWin:3,pointsForDraw:1,legsPerMatch:2,groupSize:4,teamsAdvancing:2,hasThirdPlace:!1,inviteEmails:[],...s?.data},mode:"onChange"}),{handleSubmit:p,trigger:g,getValues:ne,formState:{isSubmitting:v}}=x;f.useEffect(()=>{const i=x.watch(d=>{o(d)});return()=>i.unsubscribe()},[x,o]),f.useEffect(()=>{r(t)},[t,r]);const w=u[t].component,P=async()=>{const i=ie(t);await g(i)&&t<u.length-1&&a(T=>T+1)},S=()=>{t>0&&a(i=>i-1)},L=async i=>{try{const d=await c.mutateAsync({name:i.name,description:i.description,format:i.format,visibility:i.visibility,maxParticipants:i.maxParticipants,settings:{pointsForWin:i.pointsForWin,pointsForDraw:i.pointsForDraw,pointsForLoss:0,legsPerMatch:i.legsPerMatch,groupSize:i.groupSize,teamsAdvancing:i.teamsAdvancing,hasThirdPlace:i.hasThirdPlace,tiebreakers:["goalDifference","goalsScored","headToHead"]}});l(),n(`/tournament/${d.id}`)}catch(d){console.error("Failed to create tournament:",d)}};return e.jsxs(U,{className:"max-w-2xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Create Tournament"}),e.jsx("p",{className:"text-slate-400",children:"Set up your tournament in a few easy steps."})]}),e.jsx("div",{className:"flex items-center justify-between mb-8",children:u.map((i,d)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`
                            w-10 h-10 rounded-full flex items-center justify-center font-semibold
                            transition-colors duration-200
                            ${d<t?"bg-green-500 text-white":d===t?"bg-yellow-500 text-slate-900":"bg-slate-700 text-slate-400"}
                            `,children:d<t?e.jsx(b,{className:"w-5 h-5"}):d+1}),d<u.length-1&&e.jsx("div",{className:`w-16 h-1 mx-2
                                    ${d<t?"bg-green-500":"bg-slate-700"}`})]},i.id))}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:u[t].title}),e.jsx(_,{...x,children:e.jsxs("div",{children:[e.jsx(M,{mode:"wait",children:e.jsx(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:e.jsx(w,{})},t)}),e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-slate-700",children:[e.jsxs(N,{type:"button",variant:"ghost",onClick:S,disabled:t===0,children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Back"]}),t<u.length-1?e.jsxs(N,{type:"button",onClick:P,children:["Next",e.jsx(W,{className:"w-4 h-4 ml-2"})]}):e.jsx(N,{type:"button",onClick:()=>p(L)(),disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:["Create Tournament",e.jsx(b,{className:"w-4 h-4 ml-2"})]})})]})]})})]})}function ie(n){switch(n){case 0:return["name","description","visibility"];case 1:return["format","maxParticipants"];case 2:return["pointsForWin","pointsForDraw","legsPerMatch","groupSize","teamsAdvancing","hasThirdPlace"];case 3:return[];default:return[]}}export{de as default};
