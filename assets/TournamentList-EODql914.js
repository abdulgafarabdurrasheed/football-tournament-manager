import{c as T,M as E,L as S,j as e,a as g,T as v,C as O,B as h,X as I,r as x,u as _,b as A,d as P,A as R,P as N,I as D,m as y,e as U}from"./index-BuSUjis6.js";import{U as G,u as M,a as F}from"./useTournament-YMSbqHVU.js";import{u as k,d as K,a as B}from"./demoData-QpSvXMZ9.js";import{G as $}from"./globe-BacXlZ8M.js";const Y=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H=T("funnel",Y);const V=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],z=T("search",V),Q={DRAFT:"bg-slate-600",OPEN:"bg-blue-500",IN_PROGRESS:"bg-green-500",KNOCKOUT_STAGE:"bg-purple-500",COMPLETED:"bg-slate-500",CANCELLED:"bg-red-500"},q={DRAFT:"Draft",OPEN:"Open",IN_PROGRESS:"In Progress",KNOCKOUT_STAGE:"Knockout Stage",COMPLETED:"Completed",CANCELLED:"Cancelled"},X={LEAGUE:"League",KNOCKOUT:"Knockout",HYBRID_MULTI_GROUP:"Groups + KO",HYBRID_SINGLE_LEAGUE:"League + Playoffs"},J={PUBLIC:$,PRIVATE:S,INVITE_ONLY:E};function W({tournament:s}){const r=J[s.visibility],l=s.tournament_managers?.length??0;return e.jsx(g,{to:`/tournament/${s.id}`,children:e.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-4 hover:border-slate-600 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:`
              px-2 py-0.5 text-xs font-medium rounded-full text-white
              ${Q[s.status]}
            `,children:q[s.status]})]}),e.jsx(r,{className:"w-4 h-4 text-slate-400"})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1 truncate",children:s.name}),e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:X[s.format]}),s.description&&e.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-400",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsxs("span",{children:[l,"/",s.max_participants]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]})]})})}const Z=[{value:"DRAFT",label:"Draft"},{value:"OPEN",label:"Open"},{value:"IN_PROGRESS",label:"In Progress"},{value:"COMPLETED",label:"Completed"}],ee=[{value:"LEAGUE",label:"League"},{value:"KNOCKOUT",label:"Knockout"},{value:"HYBRID_MULTI_GROUP",label:"Groups + KO"},{value:"HYBRID_SINGLE_LEAGUE",label:"League + Playoffs"}];function se({filters:s,onChange:r,onReset:l}){const m=(t,a)=>{const o=s[t],p=o.includes(a)?o.filter(d=>d!==a):[...o,a];r({[t]:p})},i=s.status.length>0||s.format.length>0;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(t=>e.jsx("button",{onClick:()=>m("status",t.value),className:`
                px-3 py-1.5 text-sm rounded-full transition-colors
                ${s.status.includes(t.value)?"bg-yellow-500 text-slate-900 font-medium":"bg-slate-700 text-slate-300 hover:bg-slate-600"}
              `,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Format"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map(t=>e.jsx("button",{onClick:()=>m("format",t.value),className:`
                px-3 py-1.5 text-sm rounded-full transition-colors
                ${s.format.includes(t.value)?"bg-yellow-500 text-slate-900 font-medium":"bg-slate-700 text-slate-300 hover:bg-slate-600"}
              `,children:t.label},t.value))})]}),i&&e.jsx("div",{className:"pt-2 border-t border-slate-700",children:e.jsxs(h,{variant:"ghost",size:"sm",onClick:l,children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),"Clear all filters"]})})]})}function re(){const[s,r]=x.useState("my"),[l,m]=x.useState(""),[i,t]=x.useState(!1),a=_(),{setFilters:o,resetFilters:p}=A(),d=P(),{data:b,isLoading:L}=M(),{data:j,isLoading:w}=F(l);k();const f=x.useMemo(()=>{const n=s==="my"?b:j;let c=n?[...n]:[];return d&&(c=[{...B,tournament_managers:K},...c]),c.filter(u=>!(l&&!u.name.toLowerCase().includes(l.toLowerCase())||a.status.length>0&&!a.status.includes(u.status)||a.format.length>0&&!a.format.includes(u.format)))},[s,b,j,l,a,d]),C=s==="my"?L:w;return e.jsxs(R,{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Tournaments"}),e.jsx("p",{className:"text-slate-400 mt-1",children:s==="my"?"Manage your tournaments":"Browse public tournaments to join"})]}),e.jsx(g,{to:"/tournament/new",children:e.jsxs(h,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Create Tournament"]})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>r("my"),className:`
                        px-4 py-2 rounded-lg font-medium transition-colors
                        ${s==="my"?"bg-yellow-500 text-slate-900":"bg-slate-800 text-slate-400 hover:text-white"}
                    `,children:[" ","My Tournaments"]}),e.jsxs("button",{onClick:()=>r("public"),className:`
                        px-4 py-2 rounded-lg font-medium transition-colors
                        ${s==="public"?"bg-yellow-500 text-slate-900":"bg-slate-800 text-slate-400 hover:text-white"}
                    `,children:[" ","Public Tournaments"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(D,{type:"text",placeholder:"Search tournaments...",value:l,onChange:n=>m(n.target.value),className:"pl-10"})]}),e.jsxs(h,{variant:"ghost",onClick:()=>t(!i),className:i?"border-yellow-500":"",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Filters",(a.status.length>0||a.format.length>0)&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 text-xs bg-yellow-500 text-slate-900 rounded",children:a.status.length+a.format.length})]})]}),i&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:e.jsx(se,{filters:a,onChange:o,onReset:p})}),C?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(U,{className:"w-8 h-8 text-yellow-500 animate-spin"})}):f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:s==="my"?"No tournaments yet":"No public tournaments found"}),e.jsx("p",{className:"text-slate-400 mb-6",children:s==="my"?"Create your first tournament or join a public one":"Try adjusting your search or filters to find tournaments"}),s==="my"&&e.jsx(g,{to:"/tournament/new",children:e.jsxs(h,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Create Tournament"]})})]}):e.jsx("div",{"data-tour":"tournament-list",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:f.map((n,c)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.05},children:e.jsx(W,{tournament:n})},n.id))})]})}export{re as default};
